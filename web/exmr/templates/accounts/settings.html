{% extends 'accounts/dashboard-base.html' %}
{% load staticfiles %}
{% load widget_tweaks %}
{% load social_share %}
{% url 'home' as host %}
{% with user.get_profile as profile %}
    {% load i18n %}
    {% block dashboard_head_img %}
        <img src="{% static '/images/settings.png' %}">
    {% endblock %}
    {% block dashboard_head_title %}{% trans 'Settings' %}{% endblock %}
    {% block dashboard_heading %}
    

    <!-- <div class="dashboard-bg">
    <div class="merchant-tools merchant-one coin-payment-head">
        <div class=" container merchant-box">DASHBOARD
        </div>
    </div>
    </div> -->
{% endblock %}


    {% block dashboard_wrapper_content %}
    <section class="section section-pad" style="padding-top: 1em">
        <div class="container">
            <div class="bx-ash mb-2">
                <div>
                    <div class="img-dashboard">
                        <img src="{% static '/images/recevied.png' %}">
                    </div>
                    <h4 class="text-theme">{% trans 'Account Settings' %}</h4>
                </div>    
                <div>                   
                    <ul class="nav nav-tabs" style="border: none">
                        <li class="nav-item bx-ash-1 bx-client-1 mt-1">
                          <a class="nav-link a-1 active" data-toggle="tab" href="#home" style=" border-radius: 6px; min-width: 134px; text-align: center" >{% trans 'Basic Settings' %}</a>
                        </li>
                        <li class="nav-item bx-ash-1 bx-client-1  mt-1">
                          <a class="nav-link a-1" data-toggle="tab" href="#menu1" style="border-radius: 6px; min-width: 134px; text-align: center">{% trans 'Public Info' %}</a>
                        </li>
                        <li class="nav-item bx-ash-1 bx-client-1  mt-1">
                          <a class="nav-link a-1" data-toggle="tab" href="#menu2" style="border-radius: 6px; min-width: 134px; text-align: center">{% trans 'Login & Security' %}</a>
                        </li>
                        <li class="nav-item bx-ash-1 bx-client-1  mt-1">
                          <a class="nav-link a-1" data-toggle="tab" href="#menu3" style="border-radius: 6px; min-width: 134px; text-align: center">{% trans 'Merchant Settings' %}</a>
                        </li>
                      </ul>
                      
                      <!-- Tab panes -->
                    <div class="bx-ash mt-4">
                        <div class="tab-content">
                            <div class="tab-pane active container" id="home">
                                    <div class="a-1">
                                        
                                            <div class="text-left">
                                                <form class="form-inline" role="form">
                                                    <div class="form-group merchant-id">
                                                        <label for="name">{% trans 'Your Merchant ID:' %}</label>
                                                        <label for="name" style="word-break: break-word;">{{ profile.merchant_id }}</label>
                
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="text-left">
                                                <form role="form">
                                                    <div class="form-group merchant-id" style="margin-bottom: 0rem;">
                                                        <label for="name" ><span style="white-space: pre-wrap;" >{% trans 'Affiliate URL:' %}</span></label>
                                                    </div>
                                                    <div >
                                                        <p class="pr0" style="word-break: break-word;">  {% trans 'Want to earn some crypto? Give this URL to new users and when they sign up you will earn a percentage of their GETCRYPTOPAYMENTS transaction fees:' %}
                                                            <br>
                                                            <b>
                                                                <span style="word-wrap:break-word;" id="refUrl">{{ ref_url }}</span>
                                                            </b>
                                                        </p>
                                                    </div>
                                                </form>
                                            </div>
                                        
                                            <div class="row m0">
                                                <div class="col-md-6 div-share">
                                                    <button class="btn btn-orange btn-lg share btn-share" data-clipboard-target="#refUrl">
                                                        {% trans 'Share/Save' %}
                                                        <img src="{% static 'images/share.png' %}"></button>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="social-media">
                                                <ul class="text-center" style="list-style: none">
                                                    <li>
                                                        {% post_to_facebook_url ref_url as p %}
                                                        <a href="{{ facebook_url }}" target="_blank">
                                                            <img src="{% static 'images/facebook.png' %}" alt="">
                                                        </a>
                                                    </li>
                                                    <li>
                                                        {% post_to_twitter_url 'GETCRYPTOPAYMENTS' ref_url as p %}
                                                        <a href="{{ tweet_url }}">
                                                            <img src="{% static 'images/twitter.png' %}" alt="">
                                                        </a>
                                                    </li>
                                                    <li>
                                                        {% post_to_linkedin_url 'GETCRYPTOPAYMENTS' ref_url as p %}
                                                        <a href="{{ linkedin_url }}">
                                                            <img src="{% static 'images/linkedin.png' %}" alt="">
                                                        </a>
                                                    </li>
                                                    <li>
                                                        {% post_to_gplus_url ref_url as p %}
                                                        <a href="{{ gplus_url }}">
                                                            <img src="{% static 'images/google.png' %}" alt="">
                                                        </a>
                                                    </li>
                
                                                </ul>
                
                                            </div>
                                                </div>
                
                                            </div>
                
                                            <form role="form" method="post" id="accountForm" action="{% url 'accounts:settings' %}"
                                                novalidate>
                                                {% csrf_token %}
                                                <fieldset class="">
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label for="first_name">{% trans 'Account Email' %}</label>
                                                            {{ form.email }}
                                                            <span class="error">{{ form.errors.email }}</span>
                                                        </div>
                    
                                                        <div class="form-group col-md-6">
                                                            <label for="last_name">{% trans 'Confirm Email' %}</label>
                                                            {{ form.confirm_email }}
                                                            <span class="error">{{ form.errors.confirm_email }}</span>
                                                        </div>
                    
                    
                                                        <div class="form-group col-md-6">
                                                            <label for="password">{% trans 'Gender' %}</label>
                                                            {{ form.gender }}
                                                            <span class="error">{{ form.errors.gender }}</span>
                    
                                                        </div>
                    
                                                        <div class="form-group col-md-6">
                                                            <label for="confirm_password">{% trans 'Time Zone' %}</label>
                                                            {{ form.timezone }}
                                                            <span class="error">{{ form.errors.timezone }}</span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <div class=" date-pick">
                                                                <label for="password">{% trans 'Date Format' %}</label>
                                                                {{ form.date_format }}
                                                                <span class="error">{{ form.errors.date_format }}</span>
                                                            </div>
                    
                                                        </div>
                    
                                                        <div class="form-group col-md-6">
                                                            <label for="confirm_password">{% trans 'Time Format' %}</label>
                                                            {{ form.time_format }}
                                                            <span class="error">{{ form.errors.time_format }}</span>
                                                        </div>
                    
                                                        <div class="form-group col-md-12 text-center">
                                                            <button type="submit"
                                                                    class="btn btn-orange btn-lg" style="padding: 12px 40px 12px 40px; margin-top: 20px;">{% trans 'Update Account' %}</button>
                    
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                    
                            </div>
                            <div class="tab-pane container" id="menu1">
                                <div class="">

                                    <form role="form" method="post" id="publicInfo"
                                        action="{% url 'accounts:save_public_info' %}" novalidate>
                                        {% csrf_token %}
                                        <fieldset class="setting-form form-settings" style="color: white">

                                            <div class="form-group col-md-12">
                                                <label for="first_name">{% trans 'Public Name' %}</label>
                                                {{ public_info_form.public_name|add_class:'form-control text-view' }}
                                                <span class="error">{{ public_info_form.errors.public_name }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="first_name">{% trans 'Public Email' %}</label>
                                                {{ public_info_form.public_email|add_class:'form-control text-view' }}
                                                <span class="error">{{ public_info_form.errors.public_email }}</span>
                                            </div>


                                            <div class="form-group col-md-12">
                                                <label for="first_name">{% trans 'Public URL' %}</label>
                                                {{ public_info_form.public_url|add_class:'form-control text-view' }}
                                                <span class="error">{{ public_info_form.errors.public_url }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="confirm_password">Use <a href="https://en.gravatar.com/"
                                                                                    target="_blank">Gravatar</a></label>
                                                {{ public_info_form.use_gravatar }}
                                                <span class="error">{{ public_info_form.errors.use_gravatar }}</span>

                                            </div>


                                            <div class="form-group col-md-12 text-center">

                                                <button type="submit"
                                                        class="btn btn-orange btn-lg" style="padding: 12px 40px 12px 40px; margin-top: 20px;">{% trans 'Update' %}</button>

                                            </div>


                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                            <div class="tab-pane container" id="menu2">
                                <div class="">

                                    <form role="form" method="post" id="securityForm"
                                        action="{% url 'accounts:save_security_info' %}" novalidate>
                                        {% csrf_token %}
                                        <fieldset class="setting-form form-settings" style="color: white;">
                                            <div class="row">

                                                <div class="form-group col-md-12">
                                                    <label for="current_password">{% trans 'Current Password' %}</label>
                                                    {{ security_form.current_password|add_class:'form-control text-view' }}
                                                    <span class="error">{{ security_form.errors.current_password }}</span>
                                                </div>

                                                <div class="form-group col-md-12">
                                                    <label for="password">{% trans 'New Password' %}</label>
                                                    {{ security_form.password|add_class:'form-control text-view' }}
                                                    <span class="error">{{ security_form.errors.password }}</span>
                                                </div>


                                                <div class="form-group col-md-12">
                                                    <label for="confirm_password">{% trans 'Confirm Password' %}</label>
                                                    {{ security_form.confirm_password|add_class:'form-control text-view' }}
                                                    <span class="error">{{ security_form.errors.confirm_password }}</span>
                                                </div>

                                                <div class="form-group col-md-12">
                                                    <label for="two_factor_auth">{% trans '2 Factor Authentication' %}</label>
                                                    {{ security_form.two_factor_auth|add_class:'form-control text-view' }}
                                                    <span class="error">{{ security_form.errors.two_factor_auth }}</span>
                                                    <p class="form-text text-muted">
                                                        {% trans 'Email: You will be prompted for a code at the time of login which will be sent to your provided email ID.' %}
                                                        {% trans 'Linked 2FA Accounts: Link authenticators supporting TOTP such as Google Authenticator, Authy, FreeOTP, etc. You can edit your linked devices' %}
                                                        <a href="{% url 'accounts:accounts_2fa' %}">here</a>.
                                                    </p>

                                                </div>

                                                <div class="form-group col-md-12">
                                                    <label for="two_factor_auth">{% trans 'Email Confirmations for Sends/Withdrawals' %}</label>
                                                    {{ security_form.email_confirmation_transaction }}
                                                    <span class="error">{{ security_form.errors.email_confirmation_transaction }}</span>

                                                </div>

                                                <div class="form-group col-md-12">
                                                    <label for="pgp_gpg_public_key">{% trans 'PGP/GPG Public Key' %}</label>
                                                    {{ security_form.pgp_gpg_public_key|add_class:'form-control text-view' }}
                                                    <span class="error">{{ security_form.errors.pgp_gpg_public_key }}</span>

                                                </div>

                                                <div class="form-group col-md-12 text-center">

                                                    <button type="submit"
                                                    class="btn btn-orange btn-lg" style="padding: 12px 40px 12px 40px; margin-top: 20px;">{% trans 'Update' %}</button>

                                                </div>
                                            </div>

                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                            <div class="tab-pane container" id="menu3">
                                <div class="pt20">

                                    <form role="form" method="post" id="merchantSettingsForm"
                                        action="{% url 'accounts:save_ipn_settings' %}" novalidate>
                                        {% csrf_token %}
                                        <fieldset class="setting-form form-settings" style="color: white">

                                            <div class="form-group col-md-12">
                                                <label for="ipn_secret">{% trans 'IPN Secret' %}</label>
                                                {{ ipn_form.ipn_secret|add_class:'form-control text-view' }}
                                                <span class="error">{{ ipn_form.errors.ipn_secret }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="ipn_url">{% trans 'IPN URL' %}</label>
                                                {{ ipn_form.ipn_url|add_class:'form-control text-view' }}
                                                <span class="error">{{ ipn_form.errors.ipn_url }}</span>
                                            </div>
                                            <label for="confirm_password">Email Notifications</label>

                                            <div class="form-group col-md-12">
                                                <label for="confirm_password">{{ ipn_form.mail_on_new_payment_init.label }}</label>
                                                {{ ipn_form.mail_on_new_payment_init }}
                                                <span class="error">{{ ipn_form.errors.mail_on_new_payment_init }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="confirm_password">{{ ipn_form.mail_on_new_fund_receive.label }}</label>
                                                {{ ipn_form.mail_on_new_fund_receive }}
                                                <span class="error">{{ ipn_form.errors.mail_on_new_fund_receive }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="confirm_password">{{ ipn_form.mail_on_fund_sent.label }}</label>
                                                {{ ipn_form.mail_on_fund_sent }}
                                                <span class="error">{{ ipn_form.errors.mail_on_fund_sent }}</span>
                                            </div>

                                            {#                                    <div class="form-group col-md-12">#}
                                            {#                                        <label for="confirm_password">{{ ipn_form.mail_on_new_payment_init.label }}</label>#}
                                            {#                                        {{ ipn_form.mail_on_new_payment_init }}#}
                                            {#                                        <span class="error">{{ ipn_form.errors.mail_on_new_payment_init }}</span>#}
                                            {#                                    </div>#}

                                            <div class="form-group col-md-12">
                                                <label for="confirm_password">{{ ipn_form.mail_on_deposit_receive.label }}</label>
                                                {{ ipn_form.mail_on_deposit_receive }}
                                                <span class="error">{{ ipn_form.errors.mail_on_deposit_receive }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="confirm_password">{{ ipn_form.mail_on_positive_feedback.label }}</label>
                                                {{ ipn_form.mail_on_positive_feedback }}
                                                <span class="error">{{ ipn_form.errors.mail_on_positive_feedback }}</span>
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="two_factor_auth">{{ ipn_form.status_email.label }}</label>
                                                {{ ipn_form.status_email|add_class:'form-control text-view' }}
                                                <small class="form-text text-muted">
                                                    {% blocktrans %}
                                                        Payment status email will be sent to this email.
                                                        If not provided, notofications will be sent to the primary email
                                                    {% endblocktrans %}
                                                </small>
                                                <span class="error">{{ ipn_form.errors.status_email }}</span>

                                            </div>

                                            <div class="form-group col-md-12">
                                                <label for="two_factor_auth">{{ ipn_form.receive_sms.label }}</label>
                                                {{ ipn_form.receive_sms }}

                                                <span class="error">{{ ipn_form.errors.receive_sms }}</span>

                                            </div>


                                            <div class="form-group col-md-12">
                                                <label for="pgp_gpg_public_key">{{ ipn_form.phone.label }}</label>
                                                {{ ipn_form.phone|add_class:'form-control text-view' }}
                                                <span class="error">{{ ipn_form.errors.phone }}</span>

                                            </div>

                                            <div class="form-group col-md-12 text-center">

                                                <button type="submit"
                                                class="btn btn-orange btn-lg" style="padding: 12px 40px 12px 40px; margin-top: 20px;">{% trans 'Update' %}</button>

                                            </div>

                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>  
            </div>

            </div> 
        </div>
    </section>

        
    {% endblock %}
{% endwith %}

{% block extra_js %}
    <script src="{% static 'js/clipboard.min.js' %}"></script>
    <script src="{% static 'js/account_settings.js' %}"></script>


{% endblock %}
